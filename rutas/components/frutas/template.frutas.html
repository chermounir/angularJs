<h1>Frutas</h1>


<div class="border p-2 mb-2 bg-light">
    <h2>Filtro por Color</h2>
    <select class="form-control" ng-model="busqueda.color">
        <option value="">Todos</option>
        <option value="verde">verde</option>
        <option value="amarillo">Amarillo</option>
        <option value="marron">Marron</option>
    </select>
</div>

<div class="border p-2 mb-2 bg-light">
    <h2>Filtro por nombre</h2>
    <i class="fas fa-search"></i>  <input type="text" ng-model="busqueda.nombre"  placeholder="Nombre de la fruta" size="40">
    </div>
<h2>Listado de frutas</h2>
<div class="row">
    <table class="table table-striped">
        <tr>
            <th>Id </th>
            <th ng-click="columna = 'nombre'; orden = !orden; click1 = !click1;">Nombre<i ng-class="(click1)?'fas fa-sort-up':'fas fa-sort-down'" ></i></th>
            <th ng-click="columna = 'color'; orden = !orden; click2 = !click2;">Color<i ng-class="(click2)?'fas fa-sort-up':'fas fa-sort-down'"></i></th>
            <th ng-click="columna = 'precio'; orden = !orden; click3 = !click3;">Precio<i ng-class="(click3)?'fas fa-sort-up':'fas fa-sort-down'"></i></th>
        </tr>
        <tr ng-repeat="fruta in frutas | filter:busqueda | orderBy:columna:orden|limitTo:posicion|limitTo:-2">
            <td>{{fruta.id}}</td>
            <td>{{fruta.nombre}}</td>
            <td>{{fruta.color}}</td>
            <td>{{fruta.precio}}</td>
        </tr>
        
    </table>
</div>

<div class="border p-2 mb-2 bg-light">
<button class="btn btn-primary" ng-click="anteriores()">Anteriores</button>
<button class="btn btn-primary" ng-click="siguientes()">Siguientes</button>
</div>
<br>
<div class="border p-2 mb-2 bg-light">
<h3>Ejemplos de filtros con javascript:</h3>
<h5>map</h5>
<code>$scope.colores  = response.data.map(e=>e.color);</code>
{{colores}}
<h5>filter + map</h5>
<code>$scope.nombr2e  = response.data.filter(e=>e.precio>2).map(e=>e.nombre);</code>
{{nombr2e}}
<h5>map + reduce</h5>
<code>$scope.totalEuros  = response.data.map(e=>e.precio).reduce((pv,cv)=> pv+cv);</code>
{{totalEuros}}

</div>